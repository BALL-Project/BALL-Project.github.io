<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>BALLView Documentation: Scene</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>
<body>
<div align=center>
<table width="700" border="0" cellpadding="0">
  <tr> <td align="center" valign="baseline">
		
<h2 align="center">
<a href="index.html"><img src="images/left.png" width="58" height="28" border=0 align="MIDDLE"></a>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="index.html">Index</a> &nbsp;&nbsp;&nbsp;&nbsp;
<a href="molecularControl.html"><img src="images/right.png" width="58" height="28" border=0 align="MIDDLE"></a>
</h2><hr width=700>
		
<h2>3D View </h2>
<div align="justify">
The Scene widget provides the three-dimensional visualization of the loaded molecules.<br>
All activated Representations are shown here.
</div>
<br>
<font color="black">
<img src="images/scene.png" width="650" height="500" border=1>
</font>
<br>

<br>
<div align="justify">
The 3D View has several distinct modes:
<ol align=left>
  <li><a href="scene.html#rotate_mode">Rotate Mode</a>  (Hotkey CTRL-R)</li>
  <li><a href="scene.html#identify_atoms">Picking Mode</a> (Hotkey CTRL-H)</li>
  <li><a href="scene.html#move_mode">Move Mode</a></li>
  <li><a href="scene.html#editing">Editing Mode</a> </li>
</ol>
<p>The user can switch between the different modes, either by selecting the according menu entries in the "Display" menu,
  or use of the hotkeys. Switching between the last and the current mode is done by using the &quot;Escape&quot; key.</p>
<p>While the mouse cursor is over the 3D View, also the keys Q,W,E,R can be used to switch to the individual modes.</p>
<br>
<p><a name="rotate_mode" id="rotate_mode"> </a> </p>
</div>
<H2 align=center>Rotate Mode</H2>
<div align="justify">
In the Rotate Mode, the user can zoom, rotate or translate the view by pressing the mouse buttons and moving the mouse:
</div>
<br>
<div align=center>

<table border="1" cellpadding="5" width=600>
	<tr>
		<td width="50%" bgcolor="#CCCCCC">Mouse Button</td>
		<td bgcolor="#CCCCCC">Effect</td>
	</tr>
	<tr>
		<td>Left</td>
		<td>Rotate left/right and up/down</td>
	</tr>
	<tr>
		<td>Middle or Wheel</td>
		<td>Zoom in and out</td>
	</tr>
	<tr>
		<td>Right</td>
		<td>Translate up/down and left/right</td>
	</tr>	
	<tr>
	  <td>Left + Right (first keep one button pressed, than additionally the other)</td>
	  <td>Rotate (counter) clockwise</td>
	  </tr>
	<tr>
		<td>Double Left Click </td>
		<td>Show information for object under cursor (e.g. Atom) </td>
	</tr>	
</table>

</div>
<br>
<div align="justify">
Special key combinations are recognized to allow all the operations described above on systems 
with one- or two-button mice. Just hold the respective keys on the keyboard and press the (left) mouse button:
</div>
<br>
<div align=center>

<table border="1" cellpadding="5" width=600>
  <tbody>
    <tr>
      <td width="50%" bgcolor="#CCCCCC">Mouse button + key pressed</td>
      <td bgcolor="#CCCCCC">Effect</td>
    </tr>
    <tr>
      <td>Left</td>
      <td>Rotate left/right and up/down</td>
    </tr>
    <tr>
      <td>Left + Shift</td>
      <td>Zoom in and out</td>
    </tr>
    <tr>
      <td>Left + Control</td>
      <td>Translate up/down and left/right</td>
    </tr>	
    <tr>
      <td>Left + Shift + Control</td>
      <td>Rotate (counter) clockwise</td>
    </tr>	
  </tbody>
</table>

<p><br>
  </p>
<p><a name="identify_atoms"> </a></p>
</div>
<H2 align = center>Picking Mode (Identifying parts of molecules)</H2>
<div align="justify">
The Picking mode is designed to identify parts of molecules or to select them for special tasks. 
  Once you entered the picking mode the cursor will change to a cross. Now you are able to select single items. 
	Multiple items are selected using a selection rectangle (hold left-mouse-button while moving the mouse over the area you want to select).
  Any selected objects become instantly colored 
  (normally yellow, see image above). In the <a href="molecularControl.html">structure window</a>, 
  the checkboxes for the entries of these items become checked. The user can also deselect picked objects
  by using the right button (or for users with only one mouse button, by using the left mouse button and the Shift-modifier).
</div>  
<br>
 <div align=center> 
  <table border="1" cellpadding="5" width=600>
    <tr>
      <td width="50%" bgcolor="#CCCCCC">Mouse button + key pressed</td>
      <td bgcolor="#CCCCCC">Effect</td>
    </tr>
    <tr>
      <td>Left</td>
      <td>Select geometric objects, e.g. for atoms</td>
    </tr>
    <tr>
      <td>Right (or Left + Shift)</td>
      <td>Deselect geometric objects</td>
    </tr>
    <tr>
      <td>Left double click OR Middle </td>
      <td>(De-)Select the parent of the object under the cursor (e.g. the Residue of an Atom) </td>
    </tr>
</table>
</div>
<br>
<div align="justify">
  <p><a name="popup_atoms"></a> There is also an other alternative available for identifying atoms: 
    BALLView can show popup informations about the molecular entities
    under the mouse cursor. To enable this, switch into the Rotate mode and double click on any bond or atom.
  <p>&nbsp;</p>
  <p><a name="move_mode"></a> </p>
</div>
<h2 align=center>Move Mode</h2>
<p align=justify>In the Move mode, selected atoms can be moved by using the mouse. It can also be used to position Clipping Planes 
(select Move in the context menu of the Clipping Plane in the Representations list). </p>

<table border="1" cellpadding="5" width=600>
  <tr>
    <td width="50%" bgcolor="#CCCCCC">Mouse button + key pressed</td>
    <td bgcolor="#CCCCCC">Effect</td>
  </tr>
  <tr>
    <td>Left</td>
    <td>Move objects in X and Y direction </td>
  </tr>
  <tr>
    <td>Middle (or Left + Shift)</td>
    <td>Move objects in Z direction </td>
  </tr>
  <tr>
    <td>Right (or Left + Control) </td>
    <td>Rotate objects </td>
  </tr>
</table>
<br><br>
<p align=justify><a name="editing"></a></p>
<h2 align=center>Edit Mode</h2>
<p align="left">Since version 1.2 BALLView supports editing of molecules: The 3D view offers a special mode to 
create and delete atoms / bonds and change bond orders: </p>
<table border="1" cellpadding="5" width=600>
  <tr>
    <td width="50%" bgcolor="#CCCCCC">Mouse button + key pressed</td>
    <td bgcolor="#CCCCCC">Effect</td>
  </tr>
  <tr>
    <td>Left click on empty space </td>
    <td>Create a new atom</td>
  </tr>
  <tr>
    <td>Left click on atom and drag </td>
    <td>Move atom in X and Y direction.</td>
  </tr>
  <tr>
    <td>Left click on atom and drag + Shift </td>
    <td>Move atom in Z direction </td>
  </tr>
  <tr>
    <td>Double click on atom </td>
    <td>Set the atom's element</td>
  </tr>
  <tr>
    <td>Double click on ring bond </td>
    <td>Make whole ring aromatic</td>
  </tr>
  <tr>
    <td>Double click on bond </td>
    <td>Cycle through bond orders</td>
  </tr>
  <tr>
    <td>Middle (or Left + Control)</td>
    <td>Create bond</td>
  </tr>
  <tr>
    <td>Right</td>
    <td>Context Menu for items under cursor</td>
  </tr>
   <tr>
    <td>Mouse wheel</td>
    <td>Zoom in or out</td>
  </tr> 
</table>
<br>
<table border="1" cellpadding="5" width=600>
  <tr>
    <td width="50%" bgcolor="#CCCCCC">Key pressed </td>
    <td bgcolor="#CCCCCC">Effect</td>
  </tr>
  <tr>
    <td>H,N,C,O,P,S</td>
    <td>Select the element for the next atom </td>
  </tr>
  <tr>
    <td>D</td>
    <td>Delete atom under cursor </td>
  </tr>
  <tr>
    <td>Backspace</td>
    <td>Delete bond under cursor </td>
  </tr>
</table>

<p align="left">The middle click in the edit mode can either create bonds between existing atoms, or if
the mouse button is released while not pointing at an existing atom, a new atom
is created along with the new bond.</p>
<p align=justify>The editing mode allows the creation of new molecules or to modify existing ones. Bonds can be created and deleted, bond orders and formal charges can be set. Furthermore it is possible to saturate molecules with hydrogen atoms and to perform a quick optimization of the currently highlighted System (using the MMFF94 force field).</p>
<p align=justify>When a user creates a new bond or wants to move an atom, BALLView by default
only looks for matching atoms in the currently highlighted AtomContainer (e.g. an
highlighted Molecule or Residue).
This enable users e.g. to create ligands in their binding pocket, while keeping
the receptor untouched. To modify this behavior, the Editing Setting in the 
Preferences can be used. New atoms are always created in the highlighted AtomContainer. 
<br><br>
To ease access to its features, the editing mode also provides some entries in the toolbar list:
<br><br>
<center>
<table cellpadding="5" cellspacing="2" border="1">
<tr>
<td><img src="images/element.png" width="23" height="24" border="0" alt=""></td>
<td><a name="choose_element">Choose the element for the next atom</td>
</tr>
<tr>
<td><img src="images/hydrogens.png" width="23" height="23" border="0" alt=""></td>
<td><a name="saturate">Saturate the molecule with hydrogens</td>
</tr>
<tr>
<td><img src="images/minimize.png" width="23" height="23" border="0" alt=""></td>
<td><a name="optimize">Perform a quick optimization</td>
</tr>
</table>
</center>
</p>
<br>
<p align=justify>The editing functionality is optional, it is realized in the class <em>EditableScene</em>. To obtain a slimmer application without the editing functionality, use the class <em>Scene</em>. </p>
<p align=justify>&nbsp;</p>
<p></p>
<hr>
<H2 align=center>Selection Color</H2>
<div align="justify">
The color for selected objects can be changed in the <a href="displayProperties.html">model properties dialog.</a><br>
</div>
<br>

<a name="background_color"></a><H2 align=center>Background Color</H2>
<div align=justify>The background color can be changed in the preferences dialog under the point "Display"-"Main".<br>
</div>
<br>
<div align=center>
<img src="images/scene_preferences_common.png" border=1>
</div>
<p><br>
</p>
<p><a name="lightsources"></a></p>
<h2 align=center>Setting the Light Sources</h2>
<div align="justify">
<p>BALLView supports multiple light sources, which can also be freely configured, this can be done in the entry &quot;Lighting&quot; in the preferences dialog. Lights can either be set to a static position or they can move along with the camera, when zooming, rotating etc.</p>
<ul>
  <li> For static lights the position is set in means of absolute cartesian coordinates. </li>
  <li>Relative light sources obtain their position relative to the position of the camera, the right-, up- and view vector. 
	The example below means, that the light source is positioned 20 &Aring; behind the observer and 4 &Aring; units over him. 
	The direction of the light source is set to the view vector.</li>
  </ul>
</div>
<div align=center>
<p><img src="images/lights.png" width="545" height="356"></p>
</div>

<hr width=700>
<h2 align="center"><a href="index.html"><img src="images/left.png" width="58" height="28" border=0 align="MIDDLE"></a>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="index.html">Index</a> &nbsp;&nbsp;&nbsp;&nbsp;
<a href="molecularControl.html"><img src="images/right.png" width="58" height="28" border=0 align="MIDDLE"></a>
</h2>



</td></tr></table>
</div>

</body>
</html>
